#install.packages("RSQLite")
library(RSQLite)
#install.packages("DBI")
library(DBI)
#install.packages("R.utils")
library(R.utils)
setwd("/Users/andrew/Data/Uber\ rides")
# Create/Connect to a database
con <- dbConnect(RSQLite::SQLite(), dbname = "sample_db.sqlite")

#dbWriteTable(con, name="sample_table", value="Transportation_Network_Providers_-_Trips.csv", 
#             row.names=FALSE, header=TRUE, sep = ",")


### Data Cleaning

data <- read.csv(file="Transportation_Network_Providers_-_Trips.csv",nrows=20000)
#data <- read.csv(file="datatest.csv")
data$Trip.Seconds <- as.numeric(gsub(",", "", gsub("\\.", "", data$Trip.Seconds)))
#data <- data[-which(is.na(data$Fare)),]
data <- data[data$Fare>15 & data$Fare<30,]
data$Trip.Minutes <- ceiling(data$Trip.Seconds/60)

result <- lm(data$Fare ~ data$Trip.Minutes + data$Trip.Miles)
summary(result)
plot(result)

result2 <- lm(data$Fare ~ 0 + data$Trip.Minutes + data$Trip.Miles)
summary(result2)
plot(result2)


